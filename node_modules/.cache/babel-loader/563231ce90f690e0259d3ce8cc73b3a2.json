{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Andy Kwan/Desktop/ryan_subs/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Andy Kwan/Desktop/ryan_subs/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Andy Kwan\\\\Desktop\\\\ryan_subs\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useContext,useEffect}from'react';import axios from'axios';import{SyncOutlined}from'@ant-design/icons';import UserContext from'../context';import{jsx as _jsx}from\"react/jsx-runtime\";var StripeSuccess=function StripeSuccess(_ref){var history=_ref.history;var _useContext=useContext(UserContext),_useContext2=_slicedToArray(_useContext,2),state=_useContext2[0],setState=_useContext2[1];useEffect(function(){getSubscriptionStatus();},[]);var getSubscriptionStatus=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data,auth;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/subscription-status');case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;if(!(data&&data.length===0)){_context.next=6;break;}return _context.abrupt(\"return\",history.push('/'));case 6:// update user in local storage\nauth=JSON.parse(localStorage.getItem('auth_subscriptions'));auth.user=data;localStorage.setItem('auth_subscriptions',JSON.stringify(auth));// update user in context\nsetState(auth);setTimeout(function(){history.push('/account');},1000);case 11:case\"end\":return _context.stop();}}},_callee);}));return function getSubscriptionStatus(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center fw-bold\",style:{height:\"90vh\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center\",children:/*#__PURE__*/_jsx(SyncOutlined,{spin:true,style:{fontSize:\"50px\"}})})});};export default StripeSuccess;","map":{"version":3,"sources":["C:/Users/Andy Kwan/Desktop/ryan_subs/client/src/pages/Stripe-Success.js"],"names":["useContext","useEffect","axios","SyncOutlined","UserContext","StripeSuccess","history","state","setState","getSubscriptionStatus","get","data","length","push","auth","JSON","parse","localStorage","getItem","user","setItem","stringify","setTimeout","height","fontSize"],"mappings":"gZAAA,OAASA,UAAT,CAAqBC,SAArB,KAAsC,OAAtC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,YAAT,KAA6B,mBAA7B,CAEA,MAAOC,CAAAA,WAAP,KAAwB,YAAxB,C,2CAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,MAAiB,IAAdC,CAAAA,OAAc,MAAdA,OAAc,CACnC,gBAA0BN,UAAU,CAACI,WAAD,CAApC,4CAAOG,KAAP,iBAAcC,QAAd,iBACAP,SAAS,CAAC,UAAM,CACZQ,qBAAqB,GACxB,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMA,CAAAA,qBAAqB,2FAAG,wLACHP,CAAAA,KAAK,CAACQ,GAAN,CAAU,sBAAV,CADG,uCAClBC,IADkB,kBAClBA,IADkB,MAGtBA,IAAI,EAAIA,IAAI,CAACC,MAAL,GAAgB,CAHF,0DAGYN,OAAO,CAACO,IAAR,CAAa,GAAb,CAHZ,SAK1B;AACMC,IANoB,CAMbC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,oBAArB,CAAX,CANa,CAO1BJ,IAAI,CAACK,IAAL,CAAYR,IAAZ,CACAM,YAAY,CAACG,OAAb,CAAqB,oBAArB,CAA2CL,IAAI,CAACM,SAAL,CAAeP,IAAf,CAA3C,EAEA;AACAN,QAAQ,CAACM,IAAD,CAAR,CACAQ,UAAU,CAAC,UAAM,CACbhB,OAAO,CAACO,IAAR,CAAa,UAAb,EACH,CAFS,CAEP,IAFO,CAAV,CAZ0B,uDAAH,kBAArBJ,CAAAA,qBAAqB,2CAA3B,CAiBA,mBACI,YAAK,SAAS,CAAC,uCAAf,CAAuD,KAAK,CAAE,CAAEc,MAAM,CAAE,MAAV,CAA9D,uBACI,YAAK,SAAS,CAAC,2BAAf,uBACI,KAAC,YAAD,EAAc,IAAI,KAAlB,CAAmB,KAAK,CAAE,CAAEC,QAAQ,CAAE,MAAZ,CAA1B,EADJ,EADJ,EADJ,CAOH,CA9BD,CAgCA,cAAenB,CAAAA,aAAf","sourcesContent":["import { useContext, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { SyncOutlined } from '@ant-design/icons';\r\n\r\nimport UserContext from '../context';\r\n\r\nconst StripeSuccess = ({ history }) => {\r\n    const [state, setState] = useContext(UserContext);\r\n    useEffect(() => {\r\n        getSubscriptionStatus();\r\n    }, []);\r\n\r\n    const getSubscriptionStatus = async () => {\r\n        const { data } = await axios.get('/subscription-status');\r\n\r\n        if (data && data.length === 0) return history.push('/');\r\n        \r\n        // update user in local storage\r\n        const auth = JSON.parse(localStorage.getItem('auth_subscriptions'));\r\n        auth.user = data;\r\n        localStorage.setItem('auth_subscriptions', JSON.stringify(auth));\r\n        \r\n        // update user in context\r\n        setState(auth);\r\n        setTimeout(() => {\r\n            history.push('/account');\r\n        }, 1000); \r\n    };\r\n\r\n    return (\r\n        <div className=\"d-flex justify-content-center fw-bold\" style={{ height: \"90vh\" }}>\r\n            <div className=\"d-flex align-items-center\">\r\n                <SyncOutlined spin style={{ fontSize: \"50px\" }} />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StripeSuccess;"]},"metadata":{},"sourceType":"module"}