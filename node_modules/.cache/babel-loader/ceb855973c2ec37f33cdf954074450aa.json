{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Andy Kwan\\\\Desktop\\\\ryan_subs\\\\client\\\\src\\\\pages\\\\Stripe-Success.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect } from 'react';\nimport axios from 'axios';\nimport { SyncOutlined } from '@ant-design/icons';\nimport UserContext from '../context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst StripeSuccess = _ref => {\n  _s();\n\n  let {\n    history\n  } = _ref;\n  const [, setState] = useContext(UserContext);\n  useEffect(() => {\n    getSubscriptionStatus();\n  }, []);\n\n  const getSubscriptionStatus = async () => {\n    const {\n      data\n    } = await axios.get('/subscription-status');\n    if (data && data.length === 0) return history.push('/'); // update user in local storage\n\n    const auth = JSON.parse(localStorage.getItem('auth_subscriptions'));\n    auth.user = data;\n    localStorage.setItem('auth_subscriptions', JSON.stringify(auth)); // update user in context\n\n    setState(auth);\n    setTimeout(() => {\n      history.push('/account');\n    }, 1000);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex justify-content-center fw-bold\",\n    style: {\n      height: \"90vh\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex align-items-center\",\n      children: /*#__PURE__*/_jsxDEV(SyncOutlined, {\n        spin: true,\n        style: {\n          fontSize: \"50px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 9\n  }, this);\n};\n\n_s(StripeSuccess, \"TYLwU1Q+gNuoBEonqaR1r+lF5zg=\");\n\n_c = StripeSuccess;\nexport default StripeSuccess;\n\nvar _c;\n\n$RefreshReg$(_c, \"StripeSuccess\");","map":{"version":3,"sources":["C:/Users/Andy Kwan/Desktop/ryan_subs/client/src/pages/Stripe-Success.js"],"names":["useContext","useEffect","axios","SyncOutlined","UserContext","StripeSuccess","history","setState","getSubscriptionStatus","data","get","length","push","auth","JSON","parse","localStorage","getItem","user","setItem","stringify","setTimeout","height","fontSize"],"mappings":";;;AAAA,SAASA,UAAT,EAAqBC,SAArB,QAAsC,OAAtC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,QAA6B,mBAA7B;AAEA,OAAOC,WAAP,MAAwB,YAAxB;;;AAEA,MAAMC,aAAa,GAAG,QAAiB;AAAA;;AAAA,MAAhB;AAAEC,IAAAA;AAAF,GAAgB;AACnC,QAAM,GAAGC,QAAH,IAAeP,UAAU,CAACI,WAAD,CAA/B;AACAH,EAAAA,SAAS,CAAC,MAAM;AACZO,IAAAA,qBAAqB;AACxB,GAFQ,EAEN,EAFM,CAAT;;AAIA,QAAMA,qBAAqB,GAAG,YAAY;AACtC,UAAM;AAAEC,MAAAA;AAAF,QAAW,MAAMP,KAAK,CAACQ,GAAN,CAAU,sBAAV,CAAvB;AAEA,QAAID,IAAI,IAAIA,IAAI,CAACE,MAAL,KAAgB,CAA5B,EAA+B,OAAOL,OAAO,CAACM,IAAR,CAAa,GAAb,CAAP,CAHO,CAKtC;;AACA,UAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,oBAArB,CAAX,CAAb;AACAJ,IAAAA,IAAI,CAACK,IAAL,GAAYT,IAAZ;AACAO,IAAAA,YAAY,CAACG,OAAb,CAAqB,oBAArB,EAA2CL,IAAI,CAACM,SAAL,CAAeP,IAAf,CAA3C,EARsC,CAUtC;;AACAN,IAAAA,QAAQ,CAACM,IAAD,CAAR;AACAQ,IAAAA,UAAU,CAAC,MAAM;AACbf,MAAAA,OAAO,CAACM,IAAR,CAAa,UAAb;AACH,KAFS,EAEP,IAFO,CAAV;AAGH,GAfD;;AAiBA,sBACI;AAAK,IAAA,SAAS,EAAC,uCAAf;AAAuD,IAAA,KAAK,EAAE;AAAEU,MAAAA,MAAM,EAAE;AAAV,KAA9D;AAAA,2BACI;AAAK,MAAA,SAAS,EAAC,2BAAf;AAAA,6BACI,QAAC,YAAD;AAAc,QAAA,IAAI,MAAlB;AAAmB,QAAA,KAAK,EAAE;AAAEC,UAAAA,QAAQ,EAAE;AAAZ;AAA1B;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAOH,CA9BD;;GAAMlB,a;;KAAAA,a;AAgCN,eAAeA,aAAf","sourcesContent":["import { useContext, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { SyncOutlined } from '@ant-design/icons';\r\n\r\nimport UserContext from '../context';\r\n\r\nconst StripeSuccess = ({ history }) => {\r\n    const [, setState] = useContext(UserContext);\r\n    useEffect(() => {\r\n        getSubscriptionStatus();\r\n    }, []);\r\n\r\n    const getSubscriptionStatus = async () => {\r\n        const { data } = await axios.get('/subscription-status');\r\n\r\n        if (data && data.length === 0) return history.push('/');\r\n        \r\n        // update user in local storage\r\n        const auth = JSON.parse(localStorage.getItem('auth_subscriptions'));\r\n        auth.user = data;\r\n        localStorage.setItem('auth_subscriptions', JSON.stringify(auth));\r\n        \r\n        // update user in context\r\n        setState(auth);\r\n        setTimeout(() => {\r\n            history.push('/account');\r\n        }, 1000); \r\n    };\r\n\r\n    return (\r\n        <div className=\"d-flex justify-content-center fw-bold\" style={{ height: \"90vh\" }}>\r\n            <div className=\"d-flex align-items-center\">\r\n                <SyncOutlined spin style={{ fontSize: \"50px\" }} />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StripeSuccess;"]},"metadata":{},"sourceType":"module"}