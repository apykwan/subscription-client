{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Andy Kwan/Desktop/ryan_subs/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Andy Kwan/Desktop/ryan_subs/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Andy Kwan\\\\Desktop\\\\ryan_subs\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState,useContext,useEffect}from'react';import{useHistory,Link}from'react-router-dom';import axios from'axios';import{toast}from'react-hot-toast';import Input from'../components/Input';import Button from'../components/Button';import UserContext from'../context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Register=function Register(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useContext=useContext(UserContext),_useContext2=_slicedToArray(_useContext,1),state=_useContext2[0];var history=useHistory();var handleClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;e.preventDefault();_context.next=4;return axios.post(\"/register\",{name:name,email:email,password:password});case 4:_yield$axios$post=_context.sent;data=_yield$axios$post.data;if(!data.error){_context.next=8;break;}return _context.abrupt(\"return\",toast.error(data.error));case 8:toast.success(\"\".concat(data.user.name,\" has been registered.\"));history.push('/login');_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.log(_context.t0);toast.error(\"Something went wrong. Try again\");case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function handleClick(_x){return _ref.apply(this,arguments);};}();useEffect(function(){if(state&&state.token)history.push('/');},[state,history]);return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center register_head\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container align-items-center d-flex\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row col-md-6 offset-md-3 text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"pt-5 fw-bold\",children:\"Let's Get Started\"}),/*#__PURE__*/_jsx(\"p\",{className:\"lead pb-4\",children:\"Sign up for free. No credit card required.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(Input,{label:\"Name\",value:name,setValue:setName}),/*#__PURE__*/_jsx(Input,{label:\"Email\",value:email,setValue:setEmail,type:\"email\"}),/*#__PURE__*/_jsx(Input,{label:\"Password\",value:password,setValue:setPassword,type:\"password\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{handleClick:handleClick,type:\"primary\",text:\"Register\",size:\"sm\"})})]}),/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Already have an account? Login here.\"})]})})});};export default Register;","map":{"version":3,"sources":["C:/Users/Andy Kwan/Desktop/ryan_subs/client/src/pages/Register.js"],"names":["useState","useContext","useEffect","useHistory","Link","axios","toast","Input","Button","UserContext","Register","name","setName","email","setEmail","password","setPassword","state","history","handleClick","e","preventDefault","post","data","error","success","user","push","console","log","token"],"mappings":"gZAAA,OAASA,QAAT,CAAmBC,UAAnB,CAA+BC,SAA/B,KAAgD,OAAhD,CACA,OAASC,UAAT,CAAqBC,IAArB,KAAiC,kBAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,KAAT,KAAsB,iBAAtB,CAEA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,WAAP,KAAwB,YAAxB,C,wFAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACnB,cAAwBV,QAAQ,CAAC,EAAD,CAAhC,wCAAOW,IAAP,eAAaC,OAAb,eACA,eAA0BZ,QAAQ,CAAC,EAAD,CAAlC,yCAAOa,KAAP,eAAcC,QAAd,eACA,eAAgCd,QAAQ,CAAC,EAAD,CAAxC,yCAAOe,QAAP,eAAiBC,WAAjB,eAEA,gBAAgBf,UAAU,CAACQ,WAAD,CAA1B,4CAAOQ,KAAP,iBAEA,GAAMC,CAAAA,OAAO,CAAGf,UAAU,EAA1B,CAEA,GAAMgB,CAAAA,WAAW,0FAAG,iBAAOC,CAAP,6JAEZA,CAAC,CAACC,cAAF,GAFY,sBAGWhB,CAAAA,KAAK,CAACiB,IAAN,CAAW,WAAX,CAAwB,CAC3CX,IAAI,CAAJA,IAD2C,CAE3CE,KAAK,CAALA,KAF2C,CAG3CE,QAAQ,CAARA,QAH2C,CAAxB,CAHX,wCAGJQ,IAHI,mBAGJA,IAHI,KASRA,IAAI,CAACC,KATG,yDASWlB,KAAK,CAACkB,KAAN,CAAYD,IAAI,CAACC,KAAjB,CATX,SAWZlB,KAAK,CAACmB,OAAN,WAAiBF,IAAI,CAACG,IAAL,CAAUf,IAA3B,2BACAO,OAAO,CAACS,IAAR,CAAa,QAAb,EAZY,iFAcZC,OAAO,CAACC,GAAR,cACAvB,KAAK,CAACkB,KAAN,CAAY,iCAAZ,EAfY,qEAAH,kBAAXL,CAAAA,WAAW,4CAAjB,CAmBAjB,SAAS,CAAC,UAAM,CACZ,GAAIe,KAAK,EAAIA,KAAK,CAACa,KAAnB,CAA0BZ,OAAO,CAACS,IAAR,CAAa,GAAb,EAC7B,CAFQ,CAEN,CAACV,KAAD,CAAQC,OAAR,CAFM,CAAT,CAIA,mBACI,YAAK,SAAS,CAAC,6CAAf,uBACI,YAAK,SAAS,CAAC,qCAAf,uBACI,aAAK,SAAS,CAAC,sCAAf,wBACI,WAAI,SAAS,CAAC,cAAd,+BADJ,cAEI,UAAG,SAAS,CAAC,WAAb,wDAFJ,cAKI,aAAK,SAAS,CAAC,iBAAf,wBACI,KAAC,KAAD,EACI,KAAK,CAAC,MADV,CAEI,KAAK,CAAEP,IAFX,CAGI,QAAQ,CAAEC,OAHd,EADJ,cAMI,KAAC,KAAD,EACI,KAAK,CAAC,OADV,CAEI,KAAK,CAAEC,KAFX,CAGI,QAAQ,CAAEC,QAHd,CAII,IAAI,CAAC,OAJT,EANJ,cAYI,KAAC,KAAD,EACI,KAAK,CAAC,UADV,CAEI,KAAK,CAAEC,QAFX,CAGI,QAAQ,CAAEC,WAHd,CAII,IAAI,CAAC,UAJT,EAZJ,cAkBI,YAAK,SAAS,CAAC,QAAf,uBACI,KAAC,MAAD,EACI,WAAW,CAAEG,WADjB,CAEI,IAAI,CAAC,SAFT,CAGI,IAAI,CAAC,UAHT,CAII,IAAI,CAAC,IAJT,EADJ,EAlBJ,GALJ,cAgCI,KAAC,IAAD,EAAM,EAAE,CAAC,QAAT,kDAhCJ,GADJ,EADJ,EADJ,CAwCH,CAxED,CA0EA,cAAeT,CAAAA,QAAf","sourcesContent":["import { useState, useContext, useEffect } from 'react';\r\nimport { useHistory, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { toast } from 'react-hot-toast';\r\n\r\nimport Input from '../components/Input';\r\nimport Button from '../components/Button';\r\nimport UserContext from '../context';\r\n\r\nconst Register = () => {\r\n    const [name, setName] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n    const [state] = useContext(UserContext);\r\n\r\n    const history = useHistory();\r\n\r\n    const handleClick = async (e) => {\r\n        try {\r\n            e.preventDefault();\r\n            const { data } = await axios.post(\"/register\", {\r\n                name,\r\n                email,\r\n                password,\r\n            });\r\n\r\n            if (data.error) return toast.error(data.error);\r\n\r\n            toast.success(`${data.user.name} has been registered.`);\r\n            history.push('/login');\r\n        } catch (err) {\r\n            console.log(err);\r\n            toast.error(\"Something went wrong. Try again\");\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (state && state.token) history.push('/');\r\n    }, [state, history]);\r\n\r\n    return (\r\n        <div className=\"d-flex justify-content-center register_head\">\r\n            <div className=\"container align-items-center d-flex\">\r\n                <div className=\"row col-md-6 offset-md-3 text-center\">\r\n                    <h1 className=\"pt-5 fw-bold\">Let's Get Started</h1>\r\n                    <p className=\"lead pb-4\">\r\n                        Sign up for free. No credit card required.\r\n                    </p>\r\n                    <div className=\"form-group mb-3\">\r\n                        <Input \r\n                            label=\"Name\"\r\n                            value={name}\r\n                            setValue={setName}\r\n                        />\r\n                        <Input \r\n                            label=\"Email\"\r\n                            value={email}\r\n                            setValue={setEmail}\r\n                            type=\"email\"\r\n                        />\r\n                        <Input \r\n                            label=\"Password\"\r\n                            value={password}\r\n                            setValue={setPassword}\r\n                            type=\"password\"\r\n                        />\r\n                        <div className=\"d-grid\">\r\n                            <Button \r\n                                handleClick={handleClick} \r\n                                type=\"primary\" \r\n                                text=\"Register\" \r\n                                size=\"sm\" \r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <Link to=\"/login\">Already have an account? Login here.</Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Register;"]},"metadata":{},"sourceType":"module"}