{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Andy Kwan/Desktop/ryan_subs/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Andy Kwan/Desktop/ryan_subs/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Andy Kwan\\\\Desktop\\\\ryan_subs\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState,useContext,useEffect}from'react';import{useHistory,Link}from'react-router-dom';import axios from'axios';import{toast}from'react-hot-toast';import Input from'../components/Input';import Button from'../components/Button';import UserContext from'../context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useContext=useContext(UserContext),_useContext2=_slicedToArray(_useContext,2),state=_useContext2[0],setState=_useContext2[1];var history=useHistory();var handleClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;e.preventDefault();_context.next=4;return axios.post(\"/login\",{email:email,password:password});case 4:_yield$axios$post=_context.sent;data=_yield$axios$post.data;if(!data.error){_context.next=8;break;}return _context.abrupt(\"return\",toast.error(data.error));case 8:setState(data);toast.success(\"Welcome Back, \".concat(data.user.name,\".\"));localStorage.setItem('auth_subscriptions',JSON.stringify(data));history.push('/');_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);console.log(_context.t0);toast.error(\"Something went wrong. Try again\");case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);}));return function handleClick(_x){return _ref.apply(this,arguments);};}();useEffect(function(){if(state&&state.token)history.push('/');},[state,history]);return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center register_head\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container align-items-center d-flex\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row col-md-6 offset-md-3 text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"pt-5 fw-bold\",children:\"Let's Get Started\"}),/*#__PURE__*/_jsx(\"p\",{className:\"lead pb-4\",children:\"Access your subscriptions. Anytime. Anywhere.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(Input,{label:\"Email\",value:email,setValue:setEmail,type:\"email\"}),/*#__PURE__*/_jsx(Input,{label:\"Password\",value:password,setValue:setPassword,type:\"password\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{handleClick:handleClick,type:\"primary\",text:\"Login\",size:\"sm\"})})]}),/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Not yet have an account? Sign up here.\"})]})})});};export default Login;","map":{"version":3,"sources":["C:/Users/Andy Kwan/Desktop/ryan_subs/client/src/pages/Login.js"],"names":["useState","useContext","useEffect","useHistory","Link","axios","toast","Input","Button","UserContext","Login","email","setEmail","password","setPassword","state","setState","history","handleClick","e","preventDefault","post","data","error","success","user","name","localStorage","setItem","JSON","stringify","push","console","log","token"],"mappings":"gZAAA,OAASA,QAAT,CAAmBC,UAAnB,CAA+BC,SAA/B,KAAgD,OAAhD,CACA,OAASC,UAAT,CAAqBC,IAArB,KAAiC,kBAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,KAAT,KAAsB,iBAAtB,CAEA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,WAAP,KAAwB,YAAxB,C,wFAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,CAChB,cAA0BV,QAAQ,CAAC,EAAD,CAAlC,wCAAOW,KAAP,eAAcC,QAAd,eACA,eAAgCZ,QAAQ,CAAC,EAAD,CAAxC,yCAAOa,QAAP,eAAiBC,WAAjB,eAEA,gBAA0Bb,UAAU,CAACQ,WAAD,CAApC,4CAAOM,KAAP,iBAAcC,QAAd,iBAEA,GAAMC,CAAAA,OAAO,CAAGd,UAAU,EAA1B,CAEA,GAAMe,CAAAA,WAAW,0FAAG,iBAAOC,CAAP,6JAEZA,CAAC,CAACC,cAAF,GAFY,sBAGWf,CAAAA,KAAK,CAACgB,IAAN,CAAW,QAAX,CAAqB,CACxCV,KAAK,CAALA,KADwC,CAExCE,QAAQ,CAARA,QAFwC,CAArB,CAHX,wCAGJS,IAHI,mBAGJA,IAHI,KAQRA,IAAI,CAACC,KARG,yDAQWjB,KAAK,CAACiB,KAAN,CAAYD,IAAI,CAACC,KAAjB,CARX,SASZP,QAAQ,CAACM,IAAD,CAAR,CACAhB,KAAK,CAACkB,OAAN,yBAA+BF,IAAI,CAACG,IAAL,CAAUC,IAAzC,OACAC,YAAY,CAACC,OAAb,CAAqB,oBAArB,CAA2CC,IAAI,CAACC,SAAL,CAAeR,IAAf,CAA3C,EACAL,OAAO,CAACc,IAAR,CAAa,GAAb,EAZY,iFAcZC,OAAO,CAACC,GAAR,cACA3B,KAAK,CAACiB,KAAN,CAAY,iCAAZ,EAfY,qEAAH,kBAAXL,CAAAA,WAAW,4CAAjB,CAmBAhB,SAAS,CAAC,UAAM,CACZ,GAAIa,KAAK,EAAIA,KAAK,CAACmB,KAAnB,CAA0BjB,OAAO,CAACc,IAAR,CAAa,GAAb,EAC7B,CAFQ,CAEN,CAAChB,KAAD,CAAQE,OAAR,CAFM,CAAT,CAIA,mBACI,YAAK,SAAS,CAAC,6CAAf,uBACI,YAAK,SAAS,CAAC,qCAAf,uBACI,aAAK,SAAS,CAAC,sCAAf,wBACI,WAAI,SAAS,CAAC,cAAd,+BADJ,cAEI,UAAG,SAAS,CAAC,WAAb,2DAFJ,cAKI,aAAK,SAAS,CAAC,iBAAf,wBACI,KAAC,KAAD,EACI,KAAK,CAAC,OADV,CAEI,KAAK,CAAEN,KAFX,CAGI,QAAQ,CAAEC,QAHd,CAII,IAAI,CAAC,OAJT,EADJ,cAOI,KAAC,KAAD,EACI,KAAK,CAAC,UADV,CAEI,KAAK,CAAEC,QAFX,CAGI,QAAQ,CAAEC,WAHd,CAII,IAAI,CAAC,UAJT,EAPJ,cAaI,YAAK,SAAS,CAAC,QAAf,uBACI,KAAC,MAAD,EACI,WAAW,CAAEI,WADjB,CAEI,IAAI,CAAC,SAFT,CAGI,IAAI,CAAC,OAHT,CAII,IAAI,CAAC,IAJT,EADJ,EAbJ,GALJ,cA2BI,KAAC,IAAD,EAAM,EAAE,CAAC,WAAT,oDA3BJ,GADJ,EADJ,EADJ,CAmCH,CAlED,CAoEA,cAAeR,CAAAA,KAAf","sourcesContent":["import { useState, useContext, useEffect } from 'react';\r\nimport { useHistory, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { toast } from 'react-hot-toast';\r\n\r\nimport Input from '../components/Input';\r\nimport Button from '../components/Button';\r\nimport UserContext from '../context';\r\n\r\nconst Login = () => {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n    const [state, setState] = useContext(UserContext);\r\n\r\n    const history = useHistory();\r\n\r\n    const handleClick = async (e) => {\r\n        try {\r\n            e.preventDefault();\r\n            const { data } = await axios.post(\"/login\", {\r\n                email,\r\n                password,\r\n            }, );\r\n\r\n            if (data.error) return toast.error(data.error);\r\n            setState(data);\r\n            toast.success(`Welcome Back, ${data.user.name}.`);\r\n            localStorage.setItem('auth_subscriptions', JSON.stringify(data));\r\n            history.push('/');\r\n        } catch (err) {\r\n            console.log(err);\r\n            toast.error(\"Something went wrong. Try again\");\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (state && state.token) history.push('/');\r\n    }, [state, history]);\r\n\r\n    return (\r\n        <div className=\"d-flex justify-content-center register_head\">\r\n            <div className=\"container align-items-center d-flex\">\r\n                <div className=\"row col-md-6 offset-md-3 text-center\">\r\n                    <h1 className=\"pt-5 fw-bold\">Let's Get Started</h1>\r\n                    <p className=\"lead pb-4\">\r\n                        Access your subscriptions. Anytime. Anywhere.\r\n                    </p>\r\n                    <div className=\"form-group mb-3\">\r\n                        <Input \r\n                            label=\"Email\"\r\n                            value={email}\r\n                            setValue={setEmail}\r\n                            type=\"email\"\r\n                        />\r\n                        <Input \r\n                            label=\"Password\"\r\n                            value={password}\r\n                            setValue={setPassword}\r\n                            type=\"password\"\r\n                        />\r\n                        <div className=\"d-grid\">\r\n                            <Button \r\n                                handleClick={handleClick} \r\n                                type=\"primary\" \r\n                                text=\"Login\" \r\n                                size=\"sm\" \r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <Link to=\"/register\">Not yet have an account? Sign up here.</Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}